20250213

01
可在地圖上選擇冒險或進入城鎮
城鎮中的旅館可以補滿血
城鎮中的酒館可以雇用傭兵
同伴最多3人
角色頁面可察看主角與同伴的資訊
冒險頁面會隨機遇到10種敵人，每次1個敵人

02
可在戰鬥中使用聯手戰鬥
在戰鬥中逃跑失敗時，隨機一名隊伍成員會受傷
「聯手戰鬥」攻擊失敗時，隨機一名隊伍成員會受傷

03
有同伴時才顯示聯手戰鬥按紐，否則隱藏
地點選單改成正方形按紐
戰鬥邏輯支援多敵人
每個敵人有一個「目標」按紐，按下後將該敵人設為攻擊目標



20250214

01
聯手戰鬥邏輯支援多敵人
回合結束時，若隊伍全滅或敵人全滅才結束戰鬥
逃跑邏輯改為以隊伍中敏捷最低者和敵人敏捷對抗，失敗時敏捷最低的成員會受傷
死亡的敵人會從畫面上移除
擊殺敵人時名聲會+1
敵人的「目標」按紐按下後會變紅（添加 class=".selected"）

02
移除敵人的「目標」按鈕，把敵人整個欄位做成按紐
受到攻擊後的 HP 變成紅字
解決了逃跑失敗時，若同伴受傷，HP會變成NaN的bug（因為編入minDexMembers陣列時沒有獲取HP）
修復了敵人死亡時無法正確移除的bug（在讀取敵人資訊前先隱藏所有敵人欄位）
每個角色有專屬的戰鬥訊息欄位
每個隊伍成員都有「逃跑」按紐，原本的「逃跑」按紐改為「一起逃跑」按鈕
不論按下「攻擊」或「逃跑」，都會隱藏這兩個按鈕，也會隱藏「聯手戰鬥」和「一起逃跑」的按紐
按下「結束回合」按紐會讓所有按鈕重新顯示



20250215

01
按下「結束回合」後，敵人會攻擊隨機角色
敵人不能攻擊已逃跑的角色
逃走和死亡的角色會移除角色欄位
將出戰隊伍的初始化放到script.js，在encounter.html調用，避免每次刷新battle.html總是把所有同伴加入出戰隊伍
攻擊和逃跑的按鈕不會在刷新時重新出現
角色受傷時，HP會在行動結束的函式中更新到teammember陣列中
修復了主角HP為0時仍沒死亡的bug（原本在行動結束的函式中，將HP更新到teammember陣列時，member.HP = parseInt(localStorage.getItem("playerHP")) || member.HP;
這一行裡的  || member.HP 導致不會更新 0 或 NaN，刪掉  || member.HP 即可）
「聯手戰鬥」、「一起逃跑」、「隨機一名我方角色受傷」只包含出戰隊伍（teamMember陣列）中的角色
出戰隊伍超過一人時，才會顯示隊伍按鈕（「聯手戰鬥」、「一起逃跑」）



20250216

01
戰鬥訊息顯示在角色的旁邊，按鈕列的位置
調整排版，按鈕置中
按下「聯手攻擊」或「一起逃走」按鈕後，隱藏所有的按鈕
「一起逃走」成功時讓所有人離開出戰隊伍，加入逃跑者
角色死亡時，如果剩下的人都已逃走，就顯示「壯烈犧牲……幸好其他人平安逃脫」
HP不會降到0以下

02
encounter.html 有5種遇敵方式：
1. 平安無事
2. 一般遇敵（我方先攻）
3. 被偷襲（敵人先攻）
4. 發現無防備的敵人（我方第一回合攻擊、逃跑100%成功）
5.被跟蹤（再繼續探索會被偷襲）
修復了「全員陣亡還是顯示壯烈犧牲」的bug（因為逃跑隊伍沒有清空）
在map.html清除出戰隊伍和逃跑隊伍



20250217（沒備份）

01
旅館顯示資金和角色健康程度
公會可以承接、回報兼職和任務
側邊欄可以進入任務頁面



20250218

01
更新同伴設定
酒館可以拚酒量

02
酒館傭兵最多雇用3人
「戰鬥」更名為「攻擊」
攻擊失敗或逃跑失敗時不會受傷
攻擊的命中率以敏捷計算
攻擊的傷害以力量計算，訊息會顯示傷害
戰勝可獲得金錢或戰利品（逃跑沒有）
可視化地圖



20250219（沒備份）

01
地圖能隨機遇怪，如果平安無事就不會跳轉
調整戰鬥介面，HP字體改為小紅字
當敵人類型為「人形」，且隊伍總STR > 敵人總HP時，敵人會投降

20250220

01
敵人投降後，可以選擇繼續戰鬥、饒恕、搶劫

02
敵人名稱加上隨機形容詞
新增2種敵人
敵人投降後，可以選擇捕捉敵人
只要隊伍中還有2人以上沒有行動過（actableMember陣列中還有2人以上），就可以使用「聯手攻擊」和「一起逃跑」，不必全隊一起用



20250221

01
敵人投降機率為「隊伍總STR ／（隊伍總STR＋敵人總HP）」
簡化攻擊邏輯和逃跑邏輯讀取角色資料的方法
新增「物品」頁面
更新「角色」頁面，可以查看詳細資訊、和同伴交談（目前只有5個傭兵能交談）
可以在交談中解散同伴
刪除側邊欄，改為下方按鈕列

02
拚酒量遊戲增加所有人醉倒的訊息



20250222（沒備份）

01
新增「選項」頁面，增加戰鬥說明
更新「首頁」



20250223

01
「商店街」能購買商品
將物品資料庫集中到script.js
修復了「搶劫敵人後，刷新畫面就能重複領取戰利品」的bug（領取後清空初始敵人數量）

02
「商店街」可以賣出物品，價錢是購買價的一半
「物品」頁面可以丟棄物品
與人形敵人戰鬥，戰敗會被搶錢
戰敗後會以1點HP重生，有機率被守衛送回城鎮



20250224

01
將「聯手攻擊邏輯」合併到「攻擊邏輯」中
修復了「在戰鬥中打開角色頁面，會重置teamMember」的bug（戰鬥中使用teamMember的部分改為使用presentMember）
戰鬥中和同伴交談，同伴會拒絕交談（以免戰鬥中解雇導致錯誤）
捕捉敵人時，如果隊伍滿員，可以選擇替換其中一個成員
增加可捕捉的敵人的描述(description)
「角色」頁面可裝備武器、護具（還沒有能力加成）

02
同伴擁有初始裝備
戰鬥採計裝備的加成（力量、敏捷、護甲）
將大寫的Con、Str、Dex改成小寫con、str、dex
敵人也可以有裝備
捕捉的敵人可以交談



20250225

01
修復了「攻擊無法成功」的bug（捨棄targetStats的寫法）
將捕捉敵人的對話整理到battleTalk.html中的對話資料庫
戰鬥中可以和指定的敵人交談，能選擇威嚇（我方總力量＞敵人總HP即成功）、說服（魅力／意志對抗）、付錢（$50）



20250226

01
合併task和quest的函式，總稱為任務（mission），quest中文更名為「委託」
設定兩座城鎮，在不同的城鎮能接到不同的任務，目前有晨曦鎮、鐵石鎮
增加top按鈕，能滑到頁面最上方
在map.html計算距離最近的城鎮，戰敗被守衛撿回去時會回到最近的城鎮
完成兩座城鎮之間的「送貨」兼職
任務物品（specialItem）無法從物品頁面丟棄



20250227

01
寫完敵人交談對話
將顯示對話、清除對話的函式移到script.js
角色詳細頁面不再依賴網址傳送角色id
將characterTalk.html整合到character.html
角色頁面的隊伍列表改為動態生成
加入背景圖



20250228

01
要先和傭兵交談才能雇用
傭兵被僱用後就不顯示在酒館中，但會加入拚酒量遊戲
戰鬥頁面的背景圖會沿用地圖頁面的背景圖



20250303

01
降低背景圖大小



20250304

01
建築內的「離開」按鈕改到標題左邊，標題置中
在地圖頁面顯示被跟蹤的訊息，不須跳轉
在地圖頁面顯示發現敵人的訊息，點選「偷襲」按鈕後才進入戰鬥頁面
城鎮頁面會顯示城鎮名稱
森林更容易遇到敵人
在同一場戰鬥中，如果殺過敵人，再對剩下的敵人選擇「說服」或「付錢」，會被罵一頓
在戰鬥中成功說服敵人後，可再過一次困難的魅力檢定，邀請敵人加入隊伍，成為「隨從」
捕捉來的敵人稱為「俘虜」



20250305

01
「俘虜」的對話內容和「隨從」不同
在回合結束時，俘虜會和隊伍中敏捷最高者進行敏捷對抗，如果成功，俘虜就會逃走並離開隊伍
偷襲回合結束，原本敵人不會攻擊，改為會攻擊，因為只要在地圖頁面選擇偷襲，就等於暴露了

增加隨機遭遇：
遇到巡邏隊，可以跟著他們回最近的城鎮
遇到被襲擊的路人，可以救援，會增加名聲
遇到哥布林商人，可以購買裝備轉蛋，抽出來的物品還沒做



20250306

01
戰鬥中的「交談」改為主角專用按鈕，會消耗一回合



20250307

01
完成「懸賞盜賊」、「狩獵哥布林」的兼職
完成「收集種子」的兼職，在旅館睡覺時，每顆種子有10%機率發芽，變成食人花幼苗，襲擊主角



20250309

01
錢在主角身上，戰敗時如果主角已經逃走，就不會被搶錢
「懸賞盜賊」改為「懸賞逃犯」，會隨機生成三個逃犯資料
獸人和吸血鬼可以被邀請入隊
吸血鬼晚上有20%機率襲擊主角，可以選擇戰鬥或允許吸血，允許只會被吸1HP
將被懸賞的隨從交出去時，會根據種族顯示不同的對話



20250310

01
用對話系統執行副本
完成「失竊的紅寶石」委託



20250311

01
服飾店，服裝屬於護具
可以在物品欄使用藥水補血
能和紅寶石中的惡魔交談

02
只要紅寶石在物品欄中，使用烈焰魔法（全體10點攻擊）和治療魔法（單體完全治癒），每擊殺一個敵人（獻祭靈魂）就能使用一次魔法
物品欄可以分類物品



20250312

01
食人花種子歸類為戰利品，可丟棄
酒館增加「找位子坐」選項，可以自己喝酒或請同伴喝酒，喝酒的效果還沒設計

劇情和對話系統合併，需指定npc才會顯示名字

賽恩會夜襲，只會吸1HP，其他吸血鬼會吸2HP
當允許其他吸血鬼吸血時，賽恩會驅逐其他吸血鬼

可以偷商店街的商品，偷竊失敗會被守衛抓，可以選擇投降或抵抗，如果抵抗成功，再次回到商店街時還是會被守衛攔下
讓通緝等級上升的事件：偷竊失敗+1、擊殺守衛+5
讓通緝等級下降的事件：住宿-1
被通緝時，進出城都會被守衛攔下
通緝等級上升時，犯罪值也會累加，只能透過服刑減少
每次入獄最多關 5 天，如果犯罪值達到 5 就會在第 5 天被處絞刑

擊殺敵人不會增加名聲
完成任務會讓名聲+5

同伴退出隊伍時會將裝備放回主角物品中



20250313

01
同伴離隊時會將身上的裝備放回主角物品中
傭兵身上原本的裝備是他們專屬的（用owner辨識），無法丟棄、賣出或讓其他人裝備，雖然可以更換傭兵的裝備，但當傭兵離隊時會將專屬裝備一起帶走
大幅提高裝備的數值，最大HP = con * 3
補齊敵人的裝備，武器、護具也計入戰利品，全都能讓角色使用

增加諾伊爾聊天內容
增加 4 種敵人



20250314

01
完成監獄的「坐牢」、「逃獄」副本
逃獄路線目前只有硬闖大門這一條，在戰鬥中逃跑會回到自己的牢房
可以找鐵絲和鑰匙開鎖，可以和其他囚犯、艾德蒙組隊，可以到倉庫找回被沒收的物品，可以到下水道口和哥布林商人買東西
修改戰鬥結果判斷，只要是被守衛擊敗就會被逮捕
逃獄成功後會繼續被通緝



20250316

01
修復了「在盜賊團副本選擇偷襲，但沒有進入戰鬥」的bug（因為原本的機制是抽到偷襲機會後回到地圖，等按下偷襲按鈕才進入戰鬥，現在會判斷：如果是在副本中偷襲，就直接進入戰鬥）
修復了「和紅寶石對話後物品欄沒有顯示」的bug（在選項的action中呼叫顯示物品列表的函式）
修改戰敗跳轉時機：原本在行動結束時，會判斷戰鬥結果並直接跳轉，現在改為：戰勝的話，直接在行動結束時跳轉，戰敗的話，先讓玩家看一下發生什麼事，然後按下回合結束後才跳轉
修復了「收俘虜後按繼續沒反應」的bug（因為忘了在battleTalk設定預設destination）
在戰鬥中治療死亡的隊員，隊員會重新回到隊伍
可以在戰鬥中換裝備
主角初始裝備是布衣
縮小裝備之間的數值差異
如果上場成員比敵人多，敵人無法分心追趕，逃跑成功率100%
偷竊被發現時，雷諾德會幫忙平息，然後失望地離隊
如果在野外遇到敵人，雷納德有機會路過幫忙
在創角頁面預先載入所有背景圖，但如果還沒載完就跳轉，會取消載入
其他頁面會等頁面載入完成才載入圖片，確保html優先顯示



20250317

01
酒館可以點餐，料理能恢復HP，和隊友一起吃會平分效果

02
在酒館用餐時，餐點會以emoji顯示在餐桌上



20250318

01
設定頁面增加偏好設定，可替換所有NPC的性別代名詞、自訂NPC名字
「被吸血鬼俘虜的小孩」委託寫到一半



20250319

01
規劃吸血鬼僕人、血奴的規則
和賽恩一起過夜第三次時，他才會夜襲，可以選擇用血支付他的酬勞，酒館也會新增選項



20250324

01
「被吸血鬼俘虜的小孩」委託
完成古堡副本，在副本中有機會被吸血鬼抓到地下莊園當血奴，或是被選為領主的僕人

【地底莊園】
宿舍：餵食隨機吸血鬼、睡覺
農場：目前沒有功能
釀造坊：可以工作換取血葡萄酒，方式有：打掃倉庫、把幽靈菇磨粉、提供鮮血

逃脫方法：在沃特的杯子裡加入哥布林的血讓他嘔吐，主角就會被趕出莊園

02
更改函式名稱：
事件→開關
isEnd→isTrue
endEvent→turnSwitch
event→switch
Event→Switch
副本→事件
dungeon→event
Dungeon→Event
retreat→exitEvent

例外：
addEventListener
let button = event.target;

如果有物品被沒收，可以在公會的「失物招領」處繳交 $100 取回物品



20250325

01
變數teamMember更名為teamMembers（加s）
變數presentMember更名為presentMembers（加s）
變數actableMember更名為actableMembers（加s）
刪除變數hiredCompanions，用teamMember取代

修復包裹無法領取的bug（將顯示包裹的段落放到 missionDiv.innerHTML 之後）
吃酒館料理時，如果有成員已補滿，會將剩餘治療量繼續分配給未補滿的成員
將「一起逃跑邏輯」合併到「逃跑邏輯」中
區分敵人種類
每日天氣變化（在nextDay函式裡）



20250326

01
在不同地形會出現不同敵人
在地圖上可以潛行，每次移動須過敏捷檢定
有濃霧時潛行自動成功

武器能附加狀態：
穿刺，有機率附加流血狀態 3 回合（骰武器的str）
鈍擊，有機率附加倒下狀態 1 回合（骰武器的str）
揮砍，無特殊效果



20250327

01
戰鬥中的敵人列表、角色列表改為動態生成
戰鬥訊息和紅字HP會儲存到localStorage，這樣刷新頁面後不會被重置
戰鬥中顯示狀態圖示（statusIcon）
攻擊「倒地」的目標時，100%命中
上場成員比可行動敵人（未倒地的）多時，逃跑成功率100%
增加飛行系敵人，有20%機率飛上高空，此時我方攻擊無法命中，但逃跑100%成功
獅鷲更名為巨鷹
地圖擴大為 6 x 6 ，森林圖示改為兩棵樹
增加洞穴地形
只要攻擊過敵人，就無法用魅力說服對方



20250328

01
遠程武器能攻擊飛行中的敵人
戰鬥結束後清空隊員狀態
重武器改為任何人都能使用，但如果裝備者力量未達標準，會承受敏捷減值
在物品資訊中顯示附加狀態的機率
角色頁面改為兩欄式
地圖的方向按鈕改為垂直置中



20250331

01
隊友昏迷時無法交談

改變屬性擲骰的計算方式（參考DnD）
成功率 = ( 10 + ( 我方屬性 - 敵方屬性 ) / 2 ) / 20
每 1 點屬性會提高 2.5% 成功率

攻擊、逃跑、交談時都會呼叫屬性擲骰
town 資料夾更名為 locations，把 town.html 移到 locations 資料夾下
讀取背景圖片的函式會根據目前頁面調整路徑

02
角色的屬性改以物件格式儲存：
{ 
total: 總和，在每次屬性變動時更新,
basic: 基礎值,
weapon: 來自武器的加值,
armor: 來自護具的加值,
mood: 來自心情的加值,
}



20250401

01
情緒系統（還沒添加完成）

戰鬥微調：
每場戰鬥敵人只會投降一次
每天只會觸發一次雷納德路過
俘虜逃跑改為和非俘虜成員的總敏捷對抗

重新命名物品id
物品資料中增加shop屬性，標註販售的商店
武器和護具的id後如有_old，會自動辨識為破舊版，屬性加值、價格都只有三分之二
繃帶能移除流血狀態

龍只在「極端炎熱」天氣時出現



20250402

01
用試算表編輯敵人資料庫

步驟1：在enemy.html輸入這兩行，將資料匯出成csv檔
const csvData = jsonToCSV(enemy);
downloadCSV(csvData, 'enemy.csv');

步驟2：在Google試算表中匯入csv檔，就可以進行編輯
（步驟1、步驟2只需要做一次）

步驟3：編輯完成後，打開擴充功能→App Script，執行「試算表轉JSON格式」這個腳本，將轉換出來的內容複製回js檔

02
在地圖上移動時，每個隊員會自動過一次感知來偵查情況
戰鬥頁面增加每個角色的物品按鈕，打開物品會消耗一回合（尚未限制使用幾個物品）
調整UI樣式，底色改為半透明黑色



20250403

01
繼續調整UI樣式，地圖的方向按鈕去除底色
地圖擴大為7x6
增加湖泊地形
用試算表編輯物品資料庫
修改戰鬥中的狀態系統，武器上會指定addStatus（可附加的狀態名稱）、addChance（附加的機率）



20250404

01
某些敵人也有附加狀態的能力
可以坐船到湖上
增加湖泊敵人
戰鬥頁面角色名字前顯示武器icon
戰鬥頁面會儲存選擇的目標敵人，刷新後仍維持目標
顯示物品的內容合併到一個函式 showItemHTML



20250405

01
我方攻擊的戰鬥訊息全都加上敵人名字
新增鼠人的對話
在戰鬥中只能使用一個物品，用完立刻返回戰鬥畫面
在 index.html 用 iframe 顯示遊戲畫面，不需要跳轉頁面
上方按鈕列改由動態生成
上方按鈕列加入全螢幕按鈕（但iphone不支援瀏覽器全螢幕，所以暫不使用）
加上戰場圖像，將敵我雙方用圓圈表示

02
戰鬥頁面簡化為敵我的圖像，點選圖像才顯示敵我的欄位



20250408

01
修bug
伍德改名戴瑞
所有敵人都有形容詞以區分個體，形容詞分為兩種：類人、其他
在標題畫面選「繼續遊戲」時，會根據主角的身分（囚犯、血奴）來判斷要讀取到哪個位置，預設為地圖
改成在 index 預先載入所有背景圖
戰鬥中可以調整站位，如果讓成員站到前排，敵人會優先攻擊前排成員
在酒館點餐會自動計算需要的HP
在酒館用餐後，還是能進入酒館，只是會隱藏點餐按鈕
靠交談結束戰鬥（付錢除外）也能得到戰鬥勝利的情緒
有雷納德在時，偷竊必定被他發現
電腦版的上方按鈕列往中間靠



20250409

01
寫雷納德支線：陪雷納德見夥伴
戰鬥的操作流程改為：先選擇我方行動，再選擇目標
新增通知框 toast，會在獲得情緒時顯示
地圖顯示鎮名
角色詳細頁面增加「羈絆」，記錄角色的支線任務進度



20250410

01
拍賣系統，可以上架拍賣，隔天查看結果，沒成交的商品會繼續拍賣（還不能競標）
「選項」頁面可以匯出／讀取遊戲資料
「選項」頁面更新「遊戲說明」



20250411

01
戰鬥頁面中的敵人和我方欄位，右上角加上「×」關閉按鈕
「選項」頁面可以選擇字體大小，也會影響avatar、地點選單的大小
在野外可以採集資源（森林採木頭、農田採馬鈴薯），採集後會抽一次隨機遭遇，每塊地一天只能採集2次
送貨任務的包裹數量會在接任務時決定，不會無限刷新
包裹領取後可以退還，退還破損包裹需要賠錢
小屋可以生火（需要木頭）、過夜（需要食物）



20250412

01
整合顯示主角物品列表的函式 showPlayerItems



20250413

01
在小屋烹飪食物，HP恢復量的計算方式和酒館料理相同



20250414

01
調整創角頁面的排版
創角時可選角色的「背景」



20250415

01
將小屋的烹飪、睡覺功能分開
商店、酒館的商品有限購次數（庫存量），不同城鎮分開計算
酒館不再限制點餐次數
在小屋睡覺有機率被襲擊，可派一人站哨，敵人來襲時會叫醒大家，變為一般戰鬥，但站哨者無法回血



20250416

01
在公會可以選擇組隊承接任務
艾德蒙設定為不死族，每次戰鬥後會滿血復活
一次只能進行一件委託
組隊承接委託時，一旦放棄委託就會解散「冒險者」隊員
組隊承接的委託報酬會和「冒險者」隊員平分，即使中途遣散，領取報酬時照樣會平分



20250417

01
情緒不會重複獲得



20250418

01
戰鬥畫面中，角色攻擊後會彈跳一下



20250419

01
設計職業和技能



20250420

01
「使用技能」函式



20250421

01
「顯示技能結果」函式
增加智力(int)屬性
創角頁面可選擇職業



20250422

01
選項頁面增加作弊選單
設計狀態
敵人隨機決定站位



20250423

01
戰鬥頁面：
根據職業顯示技能按鈕
會檢查技能使用條件
會篩選可選的目標
添加MP、critRate(爆擊率)屬性
處理臨時生命值
敵我欄位以絕對位置顯示，覆蓋在畫面上，不影響排版
隊伍按扭整合到我方欄位中
按空白處可直接清除欄位



20250424

01
戰鬥頁面：
雙方的avatar向中線對齊
輪到敵人回合時，敵人會一個一個行動，等玩家按「下一個敵人」才會繼續
添加獲得狀態的訊息

02
戰鬥頁面：
目標按鈕不和其他按鈕同時出現，增設「取消動作按鈕」
點擊需要選擇目標的動作時，會直接清除角色欄位，並顯示「選擇目標」的提示
敵方和我方的欄位不會同時出現
目標獲得狀態時，會一併顯示在使用者的訊息中，如果玩家點擊目標，也會顯示在目標的訊息中